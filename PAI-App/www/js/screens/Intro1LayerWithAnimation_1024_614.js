// Generated by CoffeeScript 1.9.2
(function() {
  var BG_IMAGE_NAME, BG_IMAGE_TEMPLATE_NAME, Intro1LayerWithAnimation_1024_614, IntroLayerBase, curvein, curvemove, curveout,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  IntroLayerBase = require("./IntroLayerBase");

  curvemove = 'cubic-bezier(0.4, 0, 0.2, 1)';

  curvein = 'cubic-bezier(0, 0, 0.2, 1)';

  curveout = 'cubic-bezier(0.4, 0, 1, 1)';

  BG_IMAGE_NAME = "images/Intro-1-BG.png";

  BG_IMAGE_TEMPLATE_NAME = "images/Intro-1-Template.png";

  Intro1LayerWithAnimation_1024_614 = (function(superClass) {
    extend(Intro1LayerWithAnimation_1024_614, superClass);

    function Intro1LayerWithAnimation_1024_614(options) {
      this.hideWithTransition = bind(this.hideWithTransition, this);
      this.fullDisplayBG = bind(this.fullDisplayBG, this);
      this.scaleIn = bind(this.scaleIn, this);
      this.scaleOut = bind(this.scaleOut, this);
      this.play = bind(this.play, this);
      this.show = bind(this.show, this);
      options = options || {};
      options.BGImage = BG_IMAGE_NAME;
      options.backgroundColor = 'black';
      Intro1LayerWithAnimation_1024_614.__super__.constructor.call(this, options);
      this.is_start = true;
    }

    Intro1LayerWithAnimation_1024_614.prototype.show = function() {
      Intro1LayerWithAnimation_1024_614.__super__.show.apply(this, arguments);
      return this.mainLayer.center();
    };

    Intro1LayerWithAnimation_1024_614.prototype.play = function() {
      var delayValue;
      delayValue = 2;
      if (this.is_start) {
        delayValue = 0;
      }
      return Utils.delay(delayValue, (function(_this) {
        return function() {
          var gocenter;
          _this.is_start = false;
          _this.show();
          _this.BGLayer.image = BG_IMAGE_NAME;
          _this.BGLayer.width = 50;
          _this.BGLayer.height = 50;
          _this.BGLayer.borderRadius = '50%';
          _this.BGLayer.y = 0;
          _this.BGLayer.x = 0;
          gocenter = _this.BGLayer.animate({
            properties: {
              midX: _this.mainLayer.width / 2 - (_this.BGLayer.width / 2),
              midY: _this.mainLayer.height / 2 - (_this.BGLayer.height / 2)
            },
            curve: "spring-dho",
            curveOptions: {
              stiffness: 200,
              damping: 10,
              mass: 1,
              velocity: 0
            },
            time: 4
          });
          return gocenter.on("end", function() {
            return _this.scaleOut();
          });
        };
      })(this));
    };

    Intro1LayerWithAnimation_1024_614.prototype.scaleOut = function() {
      var scaleOutAnim;
      scaleOutAnim = this.BGLayer.animate({
        properties: {
          midX: this.mainLayer.width / 2,
          midY: this.mainLayer.height / 2,
          width: this.mainLayer.width + 150,
          height: this.mainLayer.width + 150
        },
        curve: curvein
      });
      return scaleOutAnim.on('end', (function(_this) {
        return function() {
          return _this.scaleIn();
        };
      })(this));
    };

    Intro1LayerWithAnimation_1024_614.prototype.scaleIn = function() {
      var scaleInAnim;
      scaleInAnim = this.BGLayer.animate({
        properties: {
          borderRadius: 0,
          midX: 510,
          midY: 299,
          width: this.mainLayer.height,
          height: this.mainLayer.height
        },
        curve: curvein
      });
      return scaleInAnim.on('end', (function(_this) {
        return function() {
          return _this.fullDisplayBG();
        };
      })(this));
    };

    Intro1LayerWithAnimation_1024_614.prototype.fullDisplayBG = function() {
      var fadeinAnim;
      this.BGLayer2 = new Layer({
        image: BG_IMAGE_TEMPLATE_NAME,
        width: this.mainLayer.width,
        height: this.mainLayer.height,
        opacity: 0
      });
      this.BGLayer2.superLayer = this.mainLayer;
      this.BGLayer2.center();
      fadeinAnim = this.BGLayer2.animate({
        properties: {
          opacity: 1
        },
        curve: curveout
      });
      return fadeinAnim.on("end", (function(_this) {
        return function() {
          _this.BGLayer.destroy();
          _this.BGLayer = _this.BGLayer2;
          return Utils.delay(5, function() {
            return _this.onPlayEnds();
          });
        };
      })(this));
    };

    Intro1LayerWithAnimation_1024_614.prototype.hideWithTransition = function() {
      return this.mainLayer.animate({
        properties: {
          x: this.mainLayer.width + 10
        },
        curve: curvemove
      });
    };

    return Intro1LayerWithAnimation_1024_614;

  })(IntroLayerBase);

  module.exports = Intro1LayerWithAnimation_1024_614;

}).call(this);
