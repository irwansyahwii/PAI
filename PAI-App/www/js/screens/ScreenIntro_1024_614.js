// Generated by CoffeeScript 1.9.2
(function() {
  var Intro1Layer, Intro2Layer, Intro3Layer, Intro4Layer, RoundCollection, ScreenBase, ScreenIntro_1024_614,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  ScreenBase = require("./ScreenBase");

  RoundCollection = require("./RoundCollection");

  Intro1Layer = require("./Intro1LayerWithAnimation_1024_614");

  Intro2Layer = require("./Intro2LayerWithAnimation_1024_614");

  Intro3Layer = require("./Intro3LayerWithAnimation_1024_614");

  Intro4Layer = require("./Intro4LayerWithAnimation_1024_614");

  ScreenIntro_1024_614 = (function(superClass) {
    extend(ScreenIntro_1024_614, superClass);

    function ScreenIntro_1024_614() {
      this.play = bind(this.play, this);
      this.onMainLayerClicked = bind(this.onMainLayerClicked, this);
      this.init = bind(this.init, this);
      this.subscribeLayerEvents = bind(this.subscribeLayerEvents, this);
      this.createIntroLayers = bind(this.createIntroLayers, this);
      ScreenIntro_1024_614.__super__.constructor.apply(this, arguments);
      this.intro_layers = new RoundCollection();
      this.is_stop_all_animations = false;
      this.onExit = null;
    }

    ScreenIntro_1024_614.prototype.createIntroLayers = function() {
      this.intro1_layer = new Intro1Layer({
        superLayer: this.mainLayer,
        width: this.width,
        height: this.height
      });
      this.intro_layers.add(this.intro1_layer);
      this.intro2_layer = new Intro2Layer({
        superLayer: this.mainLayer,
        width: this.width,
        height: this.height
      });
      this.intro_layers.add(this.intro2_layer);
      this.intro3_layer = new Intro3Layer({
        superLayer: this.mainLayer,
        width: this.width,
        height: this.height
      });
      this.intro_layers.add(this.intro3_layer);
      this.intro4_layer = new Intro4Layer({
        superLayer: this.mainLayer,
        width: this.width,
        height: this.height
      });
      this.intro_layers.add(this.intro4_layer);
      return this.subscribeLayerEvents();
    };

    ScreenIntro_1024_614.prototype.subscribeLayerEvents = function() {
      var i, layer, len, ref, results;
      ref = this.intro_layers.list;
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        layer = ref[i];
        layer.init();
        results.push(layer.onPlayEnds = (function(_this) {
          return function() {
            if (!_this.is_stop_all_animations) {
              _this.intro_layers.current().hideWithTransition();
              return _this.intro_layers.next().play();
            }
          };
        })(this));
      }
      return results;
    };

    ScreenIntro_1024_614.prototype.init = function() {
      ScreenIntro_1024_614.__super__.init.apply(this, arguments);
      this.createIntroLayers();
      return this.mainLayer.on(Events.Click, this.onMainLayerClicked);
    };

    ScreenIntro_1024_614.prototype.onMainLayerClicked = function(event, layer) {
      this.is_stop_all_animations = true;
      this.hideWithTransition();
      if (this.onExit) {
        return this.onExit();
      }
    };

    ScreenIntro_1024_614.prototype.play = function() {
      this.show();
      return this.intro_layers.current().play();
    };

    return ScreenIntro_1024_614;

  })(ScreenBase);

  module.exports = ScreenIntro_1024_614;

}).call(this);
